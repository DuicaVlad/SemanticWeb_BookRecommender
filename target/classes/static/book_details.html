<!DOCTYPE html>
<html>
<head>
    <title>Book Details</title>
    <style>
        body { font-family: sans-serif; padding: 40px; background: #eee; }
        .card { background: white; padding: 30px; border-radius: 10px; max-width: 600px; margin: auto; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        h1 { margin-top: 0; color: #333; }
        .row { margin: 15px 0; border-bottom: 1px solid #f0f0f0; padding-bottom: 10px; }
        .label { font-weight: bold; color: #555; width: 100px; display: inline-block; }
        .back-btn { display: inline-block; margin-top: 20px; text-decoration: none; color: #007bff; font-weight: bold; }
    </style>
</head>
<body>

    <div class="card">
        <h1 id="bTitle">Loading...</h1>
        
        <div class="row">
            <span class="label">Author:</span> <span id="bAuthor"></span>
        </div>
        <div class="row">
            <span class="label">Theme:</span> <span id="bTheme"></span>
        </div>
        <div class="row">
            <span class="label">Reading Level:</span> <span id="bLevel"></span>
        </div>
        <div class="row">
            <span class="label">ID:</span> <span id="bId"></span>
        </div>

        <a href="index.html" class="back-btn">&larr; Back to Book List</a>
    </div>

    <script>
        async function loadDetails() {
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');

            if (!id) {
                document.getElementById('bTitle').innerText = "No Book ID Provided";
                return;
            }

            try {
                const res = await fetch(`/api/book/${id}`);
                if (!res.ok) throw new Error("Book not found");
                
                const data = await res.json();
                
                document.getElementById('bTitle').innerText = data.title;
                document.getElementById('bAuthor').innerText = data.author;
                document.getElementById('bTheme').innerText = data.theme;
                document.getElementById('bLevel').innerText = data.level;
                document.getElementById('bId').innerText = data.id;
            } catch (e) {
                document.getElementById('bTitle').innerText = "Error loading book";
                console.error(e);
            }
        }

        loadDetails();
    </script>

</body>
</html>